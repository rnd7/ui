// UI v0.0.1
// https://github.com/rnd7/ui
// 2016-07-13, rnd7, MIT License

!function(a,b){function c(a){function b(b,f){d=B[b.token],g.push({lexeme:b.name,token:b.token,index:e,length:f,value:a.substr(e,f)}),e+=f,c()}function c(){var c=0,g=0,h=0,i=d.length;if(i){for(c in d){var j=d[c];for(g in u[j]){var k=s[u[j][g]];for(h in k.pattern){var m=k.pattern[h];if("string"==typeof m){var n=m.length,o=a.substr(e,n);if(l||(o=o.toUpperCase()),o===m)return b(k,n)}else if(m instanceof RegExp)for(var p=0;p<f-e;){p++;var o=a.substr(e,p);if(m.test(o))return b(k,p)}}}}if(e<f){var r=a.substr(0,e)+"["+a.substr(e,1)+"]"+a.substr(e+1);throw new Error('Error parsing "'+a+'". \nIllegal Expression after char "'+a.substr(e-1,1)+'" ('+e+"/"+f+"). \nExpected one of ["+d.join(", ")+']. \nError at "'+r+'".')}if(d.indexOf(q.TERMINAL)<0)throw new Error('Can not parse  "'+a+'". \nStatement not complete. Missing Expression. \nExpected one of ['+d.join(", ")+"].")}}var d=B[q.START],e=0,f=a.length,g=[];return c(),d.indexOf(q.TERMINAL)!=-1&&g.push({token:q.TERMINAL}),g}function d(a,b){var c=[];return a.SHIFT&&c.push(s.SHIFT.name),a.CTRL&&c.push(s.CTRL.name),a.ALT&&c.push(s.ALT.name),a.META&&c.push(s.META.name),b&&c.push(b),c.join("+")}function e(a,b){var e=c(a),f=n,g={},h="";for(var i in e){var j=e[i];if(j.token===q.KEY?h=j.value:j.token===q.SPECIAL?h=j.lexeme:j.token===q.MODIFIER&&(g[j.lexeme]=!0),j.token===q.SEQUENCE){var k=d(g,h);f[k]=f[k]||{},f=f[k],g={},h=""}else j.token===q.ALIAS?(f[d(g,h)]=b,f=n,g={},h=""):j.token===q.TERMINAL&&(f[d(g,h)]=b)}}function f(a){var b=c(a),e=n,f={},g="";for(var h in b){var i=b[h];if(i.token===q.KEY?g=i.value:i.token===q.SPECIAL?g=i.lexeme:i.token===q.MODIFIER&&(f[i.lexeme]=!0),i.token===q.SEQUENCE){var j=d(f,g);e=e[j],f={},g=""}else i.token===q.ALIAS?(delete e[d(f,g)],e=n,f={},g=""):i.token===q.TERMINAL&&delete e[d(f,g)]}}function g(a){return"number"!=typeof a.which?a.keyCode:a.which}function h(){p.SHIFT=!1,p.CTRL=!1,p.ALT=!1,p.META=!1}function i(a){var b=a.target.nodeName.toLowerCase(),c=a.target.type?a.target.type.toLowerCase():null;if(("input"!==b||C.indexOf(c)==-1)&&"textarea"!==b){var e=g(a),f=!1;v.hasOwnProperty(e)&&("keydown"===a.type?p[v[e]]=!0:"keyup"===a.type&&(p[v[e]]=!1),a.preventDefault()),p.SHIFT=p.SHIFT||a.shiftKey,p.ALT=p.ALT||a.altKey,p.CTRL=p.CTRL||a.ctrlKey,p.META=p.META||a.metaKey;var h="";"keydown"===a.type?x.hasOwnProperty(e)?w.hasOwnProperty(e)&&(h=w[e]):p.SHIFT&&(h=String.fromCharCode(e).toLowerCase()):"keypress"===a.type&&(h=String.fromCharCode(e),f=p.SHIFT,p.SHIFT=!1),k&&(k=clearTimeout(k));var i=d(p,h);return i&&("keypress"!==a.type||o.hasOwnProperty(i)||(o=n),o.hasOwnProperty(i)&&(o=o[i],"function"==typeof o?(o(a),o=n):k=setTimeout(function(){o=n},m),a.preventDefault())),p.SHIFT=f||p.SHIFT,!a.defaultPrevented&&void 0}}function j(){a.addEventListener("keydown",i),a.addEventListener("keypress",i),a.addEventListener("keyup",i),b.addEventListener("blur",h),b.addEventListener("focus",h)}var k,l=!1,m=400,n={},o=n,p={SHIFT:!1,CTRL:!1,ALT:!1,META:!1},q={START:"START",CHAIN:"CHAIN",SEQUENCE:"SEQUENCE",ALIAS:"ALIAS",MODIFIER:"MODIFIER",SPECIAL:"SPECIAL",KEY:"KEY",TERMINAL:"TERMINAL"},r={DOWN:"DOWN",PRESS:"PRESS"},s={CHAIN:{token:q.CHAIN,pattern:["+"]},SEQUENCE:{token:q.SEQUENCE,pattern:[","]},ALIAS:{token:q.ALIAS,pattern:[" "]},META:{token:q.MODIFIER,pattern:["META","CMD","COMMAND","APPLE","WINDOWS"],charCode:[91,93,224],capture:r.DOWN},ALT:{token:q.MODIFIER,pattern:["ALT","OPT","OPTION","ALTGR","ALTERNATIVE"],charCode:[18],capture:r.DOWN},CTRL:{token:q.MODIFIER,pattern:["CTRL","CONTROL"],charCode:[17],capture:r.DOWN},SHIFT:{token:q.MODIFIER,pattern:["SHIFT","UPPERCASE"],charCode:[16],capture:r.DOWN},LEFT:{token:q.SPECIAL,pattern:["LEFT"],charCode:[37],capture:r.DOWN},RIGHT:{token:q.SPECIAL,pattern:["RIGHT"],charCode:[39],capture:r.DOWN},UP:{token:q.SPECIAL,pattern:["UP"],charCode:[38],capture:r.DOWN},DOWN:{token:q.SPECIAL,pattern:["DOWN"],charCode:[40],capture:r.DOWN},BACKSPACE:{token:q.SPECIAL,pattern:["BACKSPACE","BACK"],charCode:[8],capture:r.DOWN},TAB:{token:q.SPECIAL,pattern:["TAB","TABULATOR"],charCode:[9],capture:r.DOWN},ENTER:{token:q.SPECIAL,pattern:["ENTER","RETURN","RET","ENT"],charCode:[13],key:"ENTER",capture:r.DOWN},CAPSLOCK:{token:q.SPECIAL,pattern:["CAPS","CAPSLOCK"],charCode:[20],capture:r.DOWN},ESCAPE:{token:q.SPECIAL,pattern:["ESC","ESCAPE"],charCode:[27],capture:r.DOWN},PAGEUP:{token:q.SPECIAL,pattern:["PGUP","PAGEUP"],charCode:[33],capture:r.DOWN},PAGEDOWN:{token:q.SPECIAL,pattern:["PGDOWN","PAGEDOWN"],charCode:[34],capture:r.DOWN},END:{token:q.SPECIAL,pattern:["END"],charCode:[35],capture:r.DOWN},HOME:{token:q.SPECIAL,pattern:["HOME"],charCode:[36],capture:r.DOWN},INSERT:{token:q.SPECIAL,pattern:["INSERT","INS"],charCode:[45],capture:r.DOWN},DELETE:{token:q.SPECIAL,pattern:["DEL","DELETE"],charCode:[46],capture:r.DOWN},PLUS:{token:q.SPECIAL,pattern:["PLUS","ADD"],charCode:[43],capture:r.PRESS},COMMA:{token:q.SPECIAL,pattern:["COMMA"],charCode:[188],capture:r.PRESS},SPACE:{token:q.SPECIAL,pattern:["SPACE"],charCode:[32],capture:r.DOWN},KEY:{token:q.KEY,pattern:[/.{1,1}/],capture:r.PRESS}};for(var t in s)s[t].name=t;var u={},v={},w={},x={};for(var t in s){var y=s[t];u[y.token]||(u[y.token]=[]),u[y.token].push(y.name);for(var z in y.charCode){var A=y.charCode[z];y.token===q.MODIFIER?v[A]=y.name:y.token===q.SPECIAL&&(w[A]=y.name),y.capture===r.DOWN&&(x[A]=y.name)}}var B={};B[q.START]=[q.MODIFIER,q.SPECIAL,q.KEY],B[q.MODIFIER]=[q.CHAIN,q.SEQUENCE,q.ALIAS,q.TERMINAL],B[q.KEY]=[q.SEQUENCE,q.ALIAS,q.TERMINAL],B[q.SPECIAL]=[q.SEQUENCE,q.ALIAS,q.TERMINAL],B[q.CHAIN]=[q.MODIFIER,q.SPECIAL,q.KEY],B[q.SEQUENCE]=[q.MODIFIER,q.SPECIAL,q.KEY],B[q.ALIAS]=[q.MODIFIER,q.SPECIAL,q.KEY],B[q.TERMINAL]=[];var C=["color","date","datetime","datetime-local","email","file","month","number","password","search","tel","text","time","url","week"];j();var D={bind:e,unbind:f};"undefined"!=typeof module&&module.exports?module.exports=D:"function"==typeof define&&define.amd?define(function(){return D}):b.keyboard=D}(document,window),function(a,b,c,d){function e(b){for(var d in b){var e=b[d],f=Array.prototype.slice.call(a.querySelectorAll(d));f.forEach(function(a){function b(b){d.call(a,b)&&f.call(a)}var d=e.process,f=e.update;e.init;if(d instanceof Function&&(/^button$|^a$|^div$/.test(a.tagName.toLowerCase())?a.addEventListener("click",b):a.addEventListener("change",b)),f instanceof Function&&a.addEventListener(h,function(b){f.call(a,b)}),c&&e.hasOwnProperty("command"))for(var g in e.command)!function(){var b=e.command[g];c(g,function(c){return b instanceof Function&&b.call(a,c),d instanceof Function&&d.call(a,c),f instanceof Function&&f.call(a),!1})}();e.init instanceof Function&&e.init.call(a),e.update instanceof Function&&e.update.call(a)})}}function f(b){for(var c in b){binding=b[c];var e=Array.prototype.slice.call(a.querySelectorAll(c));e.forEach(function(a){if(a.removeEventListener("change"),a.removeEventListener("click"),a.removeEventListener(h),d&&binding.hasOwnProperty("command"))for(var b in binding.command)d(b)})}}function g(b){var c=Array.prototype.slice.call(a.querySelectorAll(b));c.forEach(function(a){a.dispatchEvent(new Event("update"))})}var h="update",i={bind:e,unbind:f,update:g,THRU:function(a){return!0},TERMINATE:function(a){return a.preventDefault(),!1}};"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):b.gui=i}(document,window,keyboard.bind||Mousetrap.bind||keyboardJS.bind||keymage||key,keyboard.unbind||Mousetrap.unbind||keyboardJS.unbind);
//# sourceMappingURL=ui.min.js.map